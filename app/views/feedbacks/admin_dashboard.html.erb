<div class="max-w-7xl mx-auto p-6">
  <h1 class="text-2xl font-semibold mb-4">Admin Dashboard — Feedbacks</h1>

  <!-- Filters -->
  <div class="mb-6 bg-white p-4 rounded-xl shadow-sm">
    <%= form_with url: admin_dashboard_feedbacks_path, method: :get, local: true, class: "grid grid-cols-1 md:grid-cols-5 gap-4" do |f| %>
      <div>
        <%= label_tag :district_id, "District", class: "block text-sm font-medium text-stone-700" %>
        <%= select_tag :district_id,
              options_from_collection_for_select(@districts, :id, :name, params[:district_id]),
              include_blank: "All Districts",
              class: "w-full rounded-lg border-stone-300" %>
      </div>

      <div>
        <%= label_tag :school_id, "School", class: "block text-sm font-medium text-stone-700" %>
        <%= select_tag :school_id,
              options_from_collection_for_select(@schools, :id, :name, params[:school_id]),
              include_blank: "All Schools",
              class: "w-full rounded-lg border-stone-300" %>
      </div>

      <div>
        <%= label_tag :from_date, "From Date", class: "block text-sm font-medium text-stone-700" %>
        <%= date_field_tag :from_date, params[:from_date], class: "w-full rounded-lg border-stone-300" %>
      </div>

      <div>
        <%= label_tag :to_date, "To Date", class: "block text-sm font-medium text-stone-700" %>
        <%= date_field_tag :to_date, params[:to_date], class: "w-full rounded-lg border-stone-300" %>
      </div>

      <div class="flex items-end">
        <%= submit_tag "Filter", class: "px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700" %>
      </div>
    <% end %>
  </div>

  <!-- Table -->
  <div class="bg-white rounded-xl shadow-sm overflow-x-auto">
    <table class="min-w-full text-sm text-left border-collapse">
      <thead class="bg-stone-100">
        <tr>
          <th class="px-4 py-2">Date</th>
          <th class="px-4 py-2">District</th>
          <th class="px-4 py-2">School</th>
          <th class="px-4 py-2">Parent</th>
          <th class="px-4 py-2">Contact</th>
          <th class="px-4 py-2">Ratings</th>
          <th class="px-4 py-2">Issues</th>
          <th class="px-4 py-2">Remarks</th>
        </tr>
      </thead>
      <tbody>
        <% @feedbacks.each do |fb| %>
          <tr class="border-t">
            <td class="px-4 py-2"><%= fb.created_at.strftime("%d-%b-%Y") %></td>
            <td class="px-4 py-2"><%= fb.district.name %></td>
            <td><%= fb.school.district.name %></td>
            <td class="px-4 py-2"><%= fb.parent_name %></td>
            <td class="px-4 py-2"><%= fb.contact %></td>
           
			
			<td class="p-3 whitespace-nowrap">
			  ⭐ <%= fb.overall_rating || "-" %> / 5
			</td>
            <td class="px-4 py-2"><%= fb.issues&.join(", ") %></td>
            <td class="px-4 py-2"><%= truncate(fb.comments, length: 40) %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

  <div class="mt-4">
    <%= paginate @feedbacks %>
  </div>
</div>
